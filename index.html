<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>X-DECODEZ</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <style>
        /* Your CSS styles */
    </style>

</head>

<body>

    <header>
        <div class="container">
            <div class="row justify-content-center align-items-center">
                <div class="col-12 text-center">
                    <div class="logo-container">
                        <img src="https://i.postimg.cc/0MSj8Rwz/logo.png" alt="X-DECODEZ" class="logo">
                        <h1 class="title">X-DECODEZ</h1>
                        <p class="date" id="current-date"></p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="row justify-content-center align-items-center">
            <div class="col-md-6">
                <div class="card">
                    <pre id="content-val" class="fw-bold fs-10 font-monospace" style="white-space: pre-line; overflow: auto;">
                        No Content
                    </pre>
                    <button type="button" id="btn-copy" class="btn btn-clipboard" disabled>Copy To Clipboard</button>
                    <p id="clipboard-callback" class="fw-bold fs-6 font-monospace mt-3"></p>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center">
        <p>Total Visitors: <span id="visitorCount">0</span></p>
        <p>&copy; 2024 ğ– ğ—…ğ—… ğ—‹ğ—‚ğ—€ğ—ğ— ğ—‹ğ–¾ğ—Œğ–¾ğ—‹ğ—ğ–¾ğ–½ | ğ–¤ğ–­ğ–¹ğ–®â„¢</p>
    </footer>

	<script>
		function copyToClipboard(contentValue) {
			console.log(contentValue);
			var $temp = $("<textarea>");
			$("body").append($temp);
			$temp.val(`\`\`\`${contentValue}\`\`\``).select();
			document.execCommand("copy");
			$temp.remove();
		}

		$(document).ready(function () {
			var btn = $("#btn-copy");
			var clipboardCallback = $("#clipboard-callback");

			var reqParams = new URLSearchParams(window.location.search);
			var contentValue = $("#content-val");
			window.history.replaceState({}, document.title, window.location.origin);

			if (reqParams.has("content")) {
				btn.prop("disabled", false);
				
				try {
					var decodedBase64Content = atob(reqParams.get("content"), "utf-8"); 
					var decodedUnicodeContent = decodeURIComponent(escape(decodedBase64Content));
					contentValue.text(decodedUnicodeContent);
				} catch {
					contentValue.text("Content is invalid or broken, please provide valid Content!");
				}
				
				

				btn.on("click", function () {
					copyToClipboard(decodedUnicodeContent);
					clipboardCallback.text("Key copied to clipboard!");

					setTimeout(function () {
						clipboardCallback.text("");
					}, 2000);
				});
			}

			// Fungsi untuk mendapatkan tanggal saat ini
			function getCurrentDate() {
				var now = new Date();
				var date = now.getDate();
				var month = now.getMonth() + 1; // Bulan dimulai dari 0
				var year = now.getFullYear();

				// Tambahkan nol di depan angka tunggal
				if (date < 10) {
					date = "0" + date;
				}
				if (month < 10) {
					month = "0" + month;
				}

				// Format tanggal dalam bentuk DD/MM/YYYY
				return date + "/" + month + "/" + year;
			}

			// Perbarui teks tanggal saat ini
			$("#current-date").text("Current Date: " + getCurrentDate());
		});
		    </script>
		    <script>
        // Simpan jumlah pengunjung di localStorage
        if (!localStorage.getItem('visitorCount')) {
            localStorage.setItem('visitorCount', 0);
        }

        // Ambil jumlah pengunjung dari localStorage dan tampilkan
        var visitorCount = localStorage.getItem('visitorCount');
        document.getElementById('visitorCount').textContent = visitorCount;

        // Fungsi untuk menambah jumlah pengunjung dan menyimpannya di localStorage
        function incrementVisitorCount() {
            visitorCount++;
            localStorage.setItem('visitorCount', visitorCount);
            document.getElementById('visitorCount').textContent = visitorCount;
        }

        // Panggil fungsi incrementVisitorCount() setiap kali halaman dimuat
        window.onload = function () {
            incrementVisitorCount();
        };

	</script>

</body>

</html>
